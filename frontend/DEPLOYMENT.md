# Инструкции по деплою

## Проблема с поддоменом new

Поддомен `new` не работал из-за неправильной настройки роутинга и базовых путей.

## Решение

Создана отдельная конфигурация для поддомена `new` с правильными настройками:

### 1. Отдельный entry point
- `src/main-new.tsx` - точка входа для поддомена `new`
- Использует пустой `basename=""` для React Router

### 2. Отдельная конфигурация Vite
- `vite.config.new.mjs` - конфигурация для поддомена `new`
- Использует `base: '/'` вместо `base: '/latar/'`

### 3. Автоматизированная сборка
- `build-script.js` - скрипт для сборки обеих версий
- `npm run build:all` - команда для сборки всех версий

## Команды для деплоя

```bash
# Сборка всех версий
npm run build:all

# Или по отдельности
npm run build        # Основная версия
npm run build:new    # Версия для поддомена new
```

## Структура файлов после сборки

```
dist/
├── index.html          # Основная версия
├── new.html           # Версия для поддомена new
├── assets/
│   ├── index-*.css    # CSS для основной версии
│   ├── index-*.js     # JS для основной версии
│   ├── new-*.css      # CSS для поддомена new
│   └── new-*.js       # JS для поддомена new
└── _redirects         # Правила редиректа
```

## Настройка сервера

Убедитесь, что сервер правильно обрабатывает запросы:

1. `/new` → `new.html`
2. `/new/*` → `new.html`
3. Все остальные → `index.html`

## Проверка

После деплоя проверьте:
- [ ] Основной домен работает
- [ ] Поддомен `new` отображает NewPage.jsx
- [ ] Нет ошибок 404 в консоли браузера
- [ ] Все ресурсы загружаются корректно
